<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROPERTYHUB</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="adstyles.css">
    <style>
        /* Analytics-specific styles (embed if adstyles.css not updated) */
        .analytics-filter { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .analytics-filter label { font-weight: bold; margin-right: 10px; }
        .analytics-filter select { padding: 5px 10px; border: 1px solid #ddd; border-radius: 3px; }
        .analytics-stats { display: flex; gap: 20px; margin-bottom: 20px; }
        .analytics-stat-box { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); flex: 1; text-align: center; }
        .analytics-table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .analytics-th, .analytics-td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        .analytics-th { background-color: #f2f2f2; }
        .analytics-edit-btn { background: #4a90e2; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
        .analytics-edit-form { display: none; margin-top: 10px; }
        .analytics-edit-input { width: 100px; padding: 5px; }
        .analytics-save-btn, .analytics-cancel-btn { margin-left: 5px; padding: 5px 10px; border: none; border-radius: 3px; cursor: pointer; }
        .analytics-save-btn { background: #27ae60; color: white; }
        .analytics-cancel-btn { background: #e74c3c; color: white; }
        .analytics-loading { text-align: center; padding: 20px; }
        .analytics-filter-info { font-style: italic; color: #666; margin-left: 10px; }
    </style>
    <div class="logo"><a href="index.html" style="text-decoration: none; color: inherit;">PROPERTYHUB</a></div>
</head>
<body>
<div class="flex h-screen bg-gray-100">
    <!-- Sidebar -->
    <aside class="w-64 bg-white shadow-md">
        <div class="p-4 text-center">
            <div class="avatar-placeholder text-2xl font-bold">AY</div>
            <div class="mt-2 text-sm">Admin Yashodha</div>
            <div class="text-xs text-gray-500">Super Admin</div>
        </div>
        <nav class="mt-6">
            <ul class="space-y-2">
                <li><a href="#" class="nav-item flex items-center p-4 text-gray-600 hover:bg-gray-200" onclick="loadSection('dashboard')"><span class="mr-2">üìä</span> Dashboard</a></li>
                <li><a href="#" class="nav-item flex items-center p-4 text-gray-600 hover:bg-gray-200" onclick="loadSection('apartmentListings')"><span class="mr-2">üè¢</span> Apartment Listings</a></li>
                <li><a href="#" class="nav-item flex items-center p-4 text-gray-600 hover:bg-gray-200" onclick="loadSection('userManagement')"><span class="mr-2">üë•</span> User Management</a></li>
                <li><a href="#" class="nav-item flex items-center p-4 text-gray-600 hover:bg-gray-200" onclick="loadSection('analytics')"><span class="mr-2">üìà</span> Analytics</a></li>
                <li><a href="#" class="nav-item flex items-center p-4 text-gray-600 hover:bg-gray-200" onclick="loadSection('revenueReports')"><span class="mr-2">üìä</span> Revenue Reports</a></li>
                <li><a href="#" class="nav-item flex items-center p-4 text-gray-600 hover:bg-gray-200" onclick="loadSection('locationMaps')"><span class="mr-2">üó∫Ô∏è</span> Location Maps</a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto">
        <header class="header">
            <div class="logo">PROPERTYHUB</div>
            <div class="search-bar">
                <input type="text" placeholder="Search..." class="search-input" onkeyup="searchTable(this.value, currentSection)">
            </div>
            <div class="header-actions">
                <button class="create-btn" onclick="addNewApartment()">+ Create New Listing</button>
                <div class="header-icon">üìä</div>
                <div class="header-icon">‚úâÔ∏è</div>
                <div class="header-icon relative">
                    <span class="notification-badge">7</span>
                    üîî
                </div>
                <div class="user-profile">
                    <div class="avatar-placeholder">AY</div>
                    <div>
                        <div class="user-name">Admin Yashodha</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section hidden">
            <h1 class="text-2xl font-bold mb-6">Dashboard Overview</h1>

            <!-- Quick Stats -->
            <div class="quick-stats grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold" id="totalUsers">1,847</div>
                    <div class="text-sm text-gray-500">Total Users</div>
                    <div class="text-xs text-green-500">+5.2% this month</div>
                    <div class="text-3xl mt-2">üë§</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold" id="totalApartments">0</div>
                    <div class="text-sm text-gray-500">Total Listings</div>
                    <div class="text-xs text-green-500">+2 this week</div>
                    <div class="text-3xl mt-2">üè¢</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold" id="totalRevenueDash">$0.00</div>
                    <div class="text-sm text-gray-500">Total Revenue</div>
                    <div class="text-xs text-green-500">+12.5% this month</div>
                    <div class="text-3xl mt-2">üí∞</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold" id="avgPrice">$0</div>
                    <div class="text-sm text-gray-500">Avg. Price</div>
                    <div class="text-xs text-green-500">+3.1% this week</div>
                    <div class="text-3xl mt-2">üìä</div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="charts-grid grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Users Chart -->
                <div class="chart-card bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-bold mb-4">Users Overview</h2>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="usersChart"></canvas>
                    </div>
                </div>

                <!-- Apartments Chart -->
                <div class="chart-card bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-bold mb-4">Apartments Status</h2>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="apartmentsChart"></canvas>
                    </div>
                </div>

                <!-- Revenue Chart -->
                <div class="chart-card bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-bold mb-4">Revenue Analytics</h2>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>

                <!-- Location Chart -->
                <div class="chart-card bg-white p-6 rounded-lg shadow">
                    <h2 class="text-xl font-bold mb-4">Location Distribution</h2>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="locationChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-bold mb-4">Recent Activity</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white">
                        <thead>
                        <tr class="bg-gray-200">
                            <th class="py-2 px-4 text-left">Type</th>
                            <th class="py-2 px-4 text-left">Description</th>
                            <th class="py-2 px-4 text-left">Date</th>
                            <th class="py-2 px-4 text-left">User</th>
                        </tr>
                        </thead>
                        <tbody id="recentActivityBody">
                        <!-- Recent activity will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Sections -->
        <section id="dashboard" class="section hidden">
            <!-- Dashboard content -->
        </section>

        <section id="userManagement" class="section hidden">
            <div class="section-actions">
                <button class="create-btn" onclick="addNewUser()">+ Add New User</button>
                <button class="create-btn" onclick="exportUsers()">üìä Export Data</button>
            </div>
            <div class="user-stats-grid grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">1,847</div>
                    <div class="text-sm text-gray-500">Total Users</div>
                    <div class="text-xs text-green-500">+5.2% this month</div>
                    <div class="text-3xl mt-2">üë§</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">1,623</div>
                    <div class="text-sm text-gray-500">Active Users</div>
                    <div class="text-xs text-green-500">+3.1% this week</div>
                    <div class="text-3xl mt-2">‚úÖ</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">456</div>
                    <div class="text-sm text-gray-500">Premium Users</div>
                    <div class="text-xs text-green-500">+12.5% this month</div>
                    <div class="text-3xl mt-2">üëë</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">23</div>
                    <div class="text-sm text-gray-500">Suspended Users</div>
                    <div class="text-xs text-red-500">-2 this week</div>
                    <div class="text-3xl mt-2">üö´</div>
                </div>
            </div>
            <div class="table-filters flex gap-4 mb-4">
                <select id="userFilter" class="p-2 rounded-lg border" onchange="filterTable('userManagement', this.value)">
                    <option value="all">All Users</option>
                    <option value="recent">Recently Registered</option>
                    <option value="oldest">Oldest Users</option>
                </select>
            </div>
            <table class="data-table w-full bg-white rounded-lg shadow">
                <thead>
                <tr class="bg-gray-200">
                    <th>User</th>
                    <th>Email</th>
                    <th>Registration Date</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="userTableBody">
                <!-- User data will be populated here -->
                </tbody>
            </table>
        </section>

        <section id="apartmentListings" class="section hidden">
            <div class="section-actions">
                <button class="create-btn" onclick="addNewApartment()">+ Add New Apartment</button>
                <button class="create-btn" onclick="exportApartments()">üìä Export Data</button>
            </div>
            <div class="user-stats-grid grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">0</div>
                    <div class="text-sm text-gray-500">Total Listings</div>
                    <div class="text-xs text-green-500">+2 this week</div>
                    <div class="text-3xl mt-2">üè¢</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">0</div>
                    <div class="text-sm text-gray-500">Available</div>
                    <div class="text-xs text-green-500">+1 this week</div>
                    <div class="text-3xl mt-2">‚úÖ</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">0</div>
                    <div class="text-sm text-gray-500">Booked</div>
                    <div class="text-xs text-red-500">-1 this month</div>
                    <div class="text-3xl mt-2">üìÖ</div>
                </div>
                <div class="stat-card bg-white p-4 rounded-lg shadow">
                    <div class="text-2xl font-bold">0</div>
                    <div class="text-sm text-gray-500">Pending Approval</div>
                    <div class="text-xs text-yellow-500">+3 this week</div>
                    <div class="text-3xl mt-2">‚è≥</div>
                </div>
            </div>
            <div class="table-filters flex gap-4 mb-4">
                <select id="apartmentFilter" class="p-2 rounded-lg border" onchange="filterTable('apartmentListings', this.value)">
                    <option value="all">All Listings</option>
                    <option value="available">Available</option>
                    <option value="booked">Booked</option>
                    <option value="pending">Pending</option>
                </select>
            </div>
            <table class="data-table w-full bg-white rounded-lg shadow">
                <thead>
                <tr class="bg-gray-200">
                    <th>Apartment</th>
                    <th>Type</th>
                    <th>Price</th>
                    <th>Bedrooms</th>
                    <th>Location</th>
                    <th>Status</th>
                    <th>Created</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="apartmentTableBody">
                <!-- Apartment data will be populated here -->
                </tbody>
            </table>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="section hidden">
            <div class="analytics-filter">
                <label for="statusFilter">Filter by Status:</label>
                <select id="statusFilter" class="analytics-filter select">
                    <option value="">All</option>
                    <option value="COMPLETED">Completed</option>
                    <option value="PENDING">Pending</option>
                </select>
                <span id="filterInfo" class="analytics-filter-info"></span>
            </div>

            <div class="analytics-stats">
                <div class="analytics-stat-box">
                    <h3>Total Revenue</h3>
                    <p id="totalRevenue">$0.00</p>
                </div>
                <div class="analytics-stat-box">
                    <h3>Completed Payments</h3>
                    <p id="completedCount">0</p>
                </div>
                <div class="analytics-stat-box">
                    <h3>Total Payments</h3>
                    <p id="totalPayments">0</p>
                </div>
            </div>

            <div id="analyticsLoading" class="analytics-loading">Loading analytics data...</div>
            <table id="analyticsTable" class="analytics-table" style="display: none;">
                <thead>
                <tr>
                    <th class="analytics-th">Payment ID</th>
                    <th class="analytics-th">Total Amount</th>
                    <th class="analytics-th">Actions</th>
                </tr>
                </thead>
                <tbody id="analyticsPaymentsBody"></tbody>
            </table>
        </section>

        <!-- Remaining sections -->
        <section id="revenueReports" class="section hidden">
            <!-- Revenue Reports content -->
        </section>
        <section id="locationMaps" class="section hidden">
            <!-- Location Maps content -->
        </section>

        <!-- Modals (Add Apartment, View/Edit Apartment, Add User, View/Edit User - truncated for brevity) -->
        <!-- Add Apartment Modal -->
        <div id="addApartmentModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96 max-w-full mx-4">
                <h2 class="text-xl font-bold mb-4">Add New Apartment</h2>
                <form id="newApartmentForm">
                    <input type="text" id="newApartmentType" placeholder="Type" class="w-full p-2 border rounded mb-2" required>
                    <input type="number" id="newApartmentPrice" placeholder="Price" class="w-full p-2 border rounded mb-2" required>
                    <input type="number" id="newApartmentBedrooms" placeholder="Bedrooms" class="w-full p-2 border rounded mb-2" required>
                    <input type="text" id="newApartmentLocation" placeholder="Location" class="w-full p-2 border rounded mb-2" required>
                    <select id="newApartmentStatus" class="w-full p-2 border rounded mb-2">
                        <option value="AVAILABLE">Available</option>
                        <option value="BOOKED">Booked</option>
                        <option value="PENDING">Pending</option>
                    </select>
                    <textarea id="newApartmentDescription" placeholder="Description" class="w-full p-2 border rounded mb-4"></textarea>
                    <div class="flex justify-end gap-2">
                        <button type="button" onclick="closeModal('addApartmentModal')" class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button>
                        <button type="button" onclick="createApartment()" class="bg-blue-500 text-white px-4 py-2 rounded">Create</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- View Apartment Modal -->
        <div id="viewApartmentModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96 max-w-full mx-4">
                <h2 class="text-xl font-bold mb-4">Apartment Details</h2>
                <div class="space-y-2">
                    <p><strong>ID:</strong> <span id="viewApartmentId"></span></p>
                    <p><strong>Type:</strong> <span id="viewApartmentType"></span></p>
                    <p><strong>Price:</strong> <span id="viewApartmentPrice"></span></p>
                    <p><strong>Bedrooms:</strong> <span id="viewApartmentBedrooms"></span></p>
                    <p><strong>Location:</strong> <span id="viewApartmentLocation"></span></p>
                    <p><strong>Status:</strong> <span id="viewApartmentStatus"></span></p>
                    <p><strong>Description:</strong> <span id="viewApartmentDescription"></span></p>
                </div>
                <button onclick="closeModal('viewApartmentModal')" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded w-full">Close</button>
            </div>
        </div>

        <!-- Edit Apartment Modal -->
        <div id="editApartmentModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96 max-w-full mx-4">
                <h2 class="text-xl font-bold mb-4">Edit Apartment</h2>
                <input type="hidden" id="editApartmentId">
                <input type="text" id="editApartmentType" placeholder="Type" class="w-full p-2 border rounded mb-2">
                <input type="number" id="editApartmentPrice" placeholder="Price" class="w-full p-2 border rounded mb-2">
                <input type="number" id="editApartmentBedrooms" placeholder="Bedrooms" class="w-full p-2 border rounded mb-2">
                <input type="text" id="editApartmentLocation" placeholder="Location" class="w-full p-2 border rounded mb-2">
                <select id="editApartmentStatus" class="w-full p-2 border rounded mb-2">
                    <option value="AVAILABLE">Available</option>
                    <option value="BOOKED">Booked</option>
                    <option value="PENDING">Pending</option>
                </select>
                <textarea id="editApartmentDescription" placeholder="Description" class="w-full p-2 border rounded mb-4"></textarea>
                <div class="flex justify-end gap-2">
                    <button onclick="closeModal('editApartmentModal')" class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button>
                    <button onclick="updateApartment()" class="bg-green-500 text-white px-4 py-2 rounded">Update</button>
                </div>
            </div>
        </div>

        <!-- User Management Modals -->
        <!-- Add User Modal -->
        <div id="addUserModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96 max-w-full mx-4">
                <h2 class="text-xl font-bold mb-4">Add New User</h2>
                <form id="newUserForm">
                    <input type="text" id="newUserName" placeholder="Full Name" class="w-full p-2 border rounded mb-2" required>
                    <input type="email" id="newUserEmail" placeholder="Email" class="w-full p-2 border rounded mb-2" required>
                    <input type="text" id="newUserPhone" placeholder="Phone" class="w-full p-2 border rounded mb-2">
                    <input type="password" id="newUserPassword" placeholder="Password" class="w-full p-2 border rounded mb-4" required>
                    <div class="flex justify-end gap-2">
                        <button type="button" onclick="closeModal('addUserModal')" class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button>
                        <button type="button" onclick="createUser()" class="bg-blue-500 text-white px-4 py-2 rounded">Create</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- View User Modal -->
        <div id="viewUserModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96 max-w-full mx-4">
                <h2 class="text-xl font-bold mb-4">User Details</h2>
                <div class="space-y-2">
                    <p><strong>Name:</strong> <span id="viewUserName"></span></p>
                    <p><strong>Email:</strong> <span id="viewUserEmail"></span></p>
                    <p><strong>Phone:</strong> <span id="viewUserPhone"></span></p>
                    <p><strong>Registration Date:</strong> <span id="viewUserRegDate"></span></p>
                </div>
                <button onclick="closeModal('viewUserModal')" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded w-full">Close</button>
            </div>
        </div>

        <!-- Edit User Modal -->
        <div id="editUserModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96 max-w-full mx-4">
                <h2 class="text-xl font-bold mb-4">Edit User</h2>
                <input type="hidden" id="editUserId">
                <input type="text" id="editUserName" placeholder="Full Name" class="w-full p-2 border rounded mb-2">
                <input type="email" id="editUserEmail" placeholder="Email" class="w-full p-2 border rounded mb-2">
                <input type="text" id="editUserPhone" placeholder="Phone" class="w-full p-2 border rounded mb-4">
                <div class="flex justify-end gap-2">
                    <button onclick="closeModal('editUserModal')" class="bg-gray-500 text-white px-4 py-2 rounded">Cancel</button>
                    <button onclick="updateUser()" class="bg-green-500 text-white px-4 py-2 rounded">Update</button>
                </div>
            </div>
        </div>

    </main>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="adscript.js"></script>
</body>
</html>