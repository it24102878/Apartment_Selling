<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PropertyHub - Premium Real Estate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        :root {
            /* Light Mode Variables */
            --bg-primary-light: #F9FAFB;
            --bg-secondary-light: #FFFFFF;
            --text-primary-light: #111827;
            --text-secondary-light: #6B7280;
            --primary-light: #4F46E5;
            --secondary-light: #06B6D4;
            --accent-light: #F59E0B;
            --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --border-light: rgba(79, 70, 229, 0.1);
            --success-light: #22C55E;
            --error-light: #EF4444;

            /* Dark Mode Variables */
            --bg-primary-dark: #1F2937;
            --bg-secondary-dark: #374151;
            --text-primary-dark: #F3F4F6;
            --text-secondary-dark: #D1D5DB;
            --primary-dark: #818CF8;
            --secondary-dark: #22D3EE;
            --accent-dark: #FBBF24;
            --shadow-dark: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --border-dark: rgba(129, 140, 248, 0.2);
            --success-dark: #4ADE80;
            --error-dark: #F87171;

            /* Default to Light Mode */
            --bg-primary: var(--bg-primary-light);
            --bg-secondary: var(--bg-secondary-light);
            --text-primary: var(--text-primary-light);
            --text-secondary: var(--text-secondary-light);
            --primary: var(--primary-light);
            --secondary: var(--secondary-light);
            --accent: var(--accent-light);
            --shadow: var(--shadow-light);
            --border: var(--border-light);
            --success: var(--success-light);
            --error: var(--error-light);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --bg-primary: var(--bg-primary-dark);
            --bg-secondary: var(--bg-secondary-dark);
            --text-primary: var(--text-primary-dark);
            --text-secondary: var(--text-secondary-dark);
            --primary: var(--primary-dark);
            --secondary: var(--secondary-dark);
            --accent: var(--accent-dark);
            --shadow: var(--shadow-dark);
            --border: var(--border-dark);
            --success: var(--success-dark);
            --error: var(--error-dark);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
        }

        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--bg-secondary);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: var(--transition);
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo i {
            margin-right: 12px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
        }

        .nav-menu li {
            margin: 0 20px;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            transition: var(--transition);
            padding: 10px 15px;
            border-radius: 8px;
        }

        .nav-menu a:hover, .nav-menu a.active {
            color: var(--primary);
            background-color: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
        }

        .auth-buttons {
            display: flex;
            align-items: center;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 16px;
        }

        .btn-login {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
            margin-right: 12px;
        }

        .btn-signup {
            background-color: var(--primary);
            color: var(--bg-secondary);
            border: 1px solid var(--primary);
        }

        .btn-login:hover {
            background-color: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
            transform: translateY(-2px);
        }

        .btn-signup:hover {
            background-color: var(--primary-dark, #4338CA);
            transform: translateY(-2px);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background-color: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
            transform: scale(1.1);
        }

        /* User Dropdown Styles */
        .user-dropdown {
            position: relative;
            display: none;
        }

        .user-trigger {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            padding: 10px 18px;
            border-radius: 30px;
            transition: var(--transition);
        }

        .user-trigger:hover {
            background-color: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
            transform: translateY(-2px);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-secondary);
            font-weight: 600;
            font-size: 16px;
        }

        .user-name {
            color: var(--primary);
            font-weight: 500;
            font-size: 16px;
        }

        .dropdown-arrow {
            color: var(--primary);
            font-size: 14px;
            transition: transform 0.3s;
        }

        .user-dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .user-dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-secondary);
            border-radius: 16px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            min-width: 280px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            margin-top: 8px;
        }

        .user-dropdown-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-header {
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .user-avatar-large {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-secondary);
            font-weight: 600;
            font-size: 20px;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name-large {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 18px;
        }

        .user-email {
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 4px;
        }

        .dropdown-divider {
            height: 1px;
            background: var(--border);
            margin: 0 12px;
        }

        .dropdown-menu-items {
            padding: 12px 0;
            list-style: none;
            margin: 0;
        }

        .dropdown-menu-items a {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 24px;
            color: var(--text-primary);
            text-decoration: none;
            transition: var(--transition);
        }

        .dropdown-menu-items a:hover {
            background-color: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
            color: var(--primary);
        }

        .dropdown-menu-items i {
            width: 20px;
            text-align: center;
            color: var(--text-secondary);
        }

        .dropdown-menu-items a:hover i {
            color: var(--primary);
        }

        .dropdown-footer {
            padding: 12px 24px 24px;
        }

        .btn-logout-dropdown {
            width: 100%;
            padding: 12px;
            background: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
            color: var(--error);
            border: 1px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .btn-logout-dropdown:hover {
            background: rgba(var(--error-rgb, 239, 68, 68), 0.05);
            border-color: var(--error);
        }

        /* Search Section */
        .search-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--bg-secondary);
            padding: 80px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .search-section::before {
            content: '';
            position: absolute;
            bottom: -50px;
            left: 0;
            width: 100%;
            height: 100px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23F9FAFB' fill-opacity='1' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,128C960,160,1056,224,1152,245.3C1248,267,1344,245,1392,234.7L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
            background-size: cover;
            transition: var(--transition);
        }

        [data-theme="dark"] .search-section::before {
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%231F2937' fill-opacity='1' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,128C960,160,1056,224,1152,245.3C1248,267,1344,245,1392,234.7L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
        }

        .search-section h1 {
            font-size: 3em;
            margin-bottom: 24px;
            font-weight: 700;
        }

        .search-box {
            display: flex;
            max-width: 700px;
            margin: 0 auto;
            box-shadow: var(--shadow);
            border-radius: 12px;
            overflow: hidden;
        }

        .search-input {
            flex: 1;
            padding: 18px;
            border: none;
            font-size: 16px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
        }

        .search-btn {
            padding: 18px 30px;
            background: var(--bg-secondary);
            color: var(--primary);
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
        }

        .search-btn:hover {
            background: rgba(var(--primary-rgb, 79, 70, 229), 0.1);
        }

        /* Properties Section */
        .properties-section {
            padding: 60px 0;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Apartment Details Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .apartment-modal {
            background: var(--bg-secondary);
            border-radius: 20px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .apartment-modal {
            transform: scale(1);
        }

        .modal-header {
            position: relative;
            padding: 0;
        }

        .modal-image {
            width: 100%;
            height: 300px;
            border-radius: 20px 20px 0 0;
            overflow: hidden;
            position: relative;
        }

        .modal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: var(--error);
            transform: scale(1.1);
        }

        .modal-price-badge {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 24px;
            font-weight: 700;
            box-shadow: var(--shadow);
        }

        .modal-content {
            padding: 30px;
        }

        .modal-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .modal-address {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
        }

        .modal-address i {
            margin-right: 8px;
            color: var(--primary);
        }

        .apartment-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .detail-section {
            background: var(--bg-primary);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--border);
        }

        .detail-section h3 {
            color: var(--primary);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .detail-section h3 i {
            margin-right: 8px;
            width: 20px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .feature-item i {
            color: var(--success);
            margin-right: 8px;
            width: 16px;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding-top: 25px;
            border-top: 1px solid var(--border);
        }

        .modal-btn {
            padding: 15px 30px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 150px;
            justify-content: center;
        }

        .modal-btn-primary {
            background: var(--primary);
            color: white;
        }

        .modal-btn-primary:hover {
            background: var(--primary-dark, #4338CA);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .modal-btn-secondary {
            background: var(--success);
            color: white;
        }

        .modal-btn-secondary:hover {
            background: var(--success-dark, #16A34A);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .modal-btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .modal-btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        @media (max-width: 768px) {
            .apartment-modal {
                width: 95%;
                margin: 20px;
            }

            .apartment-details-grid {
                grid-template-columns: 1fr;
            }

            .modal-actions {
                flex-direction: column;
            }

            .modal-btn {
                width: 100%;
            }
        }

        .properties-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 2.5em;
            color: var(--text-primary);
            font-weight: 700;
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .view-all:hover {
            color: var(--primary-dark, #4338CA);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
        }

        .property-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .property-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .property-image {
            height: 220px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--bg-secondary);
            font-size: 24px;
            font-weight: 600;
            position: relative;
        }

        .property-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .property-card:hover .property-image::after {
            background: rgba(0, 0, 0, 0.2);
        }

        .property-content {
            padding: 24px;
        }

        .property-price {
            color: var(--primary);
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .property-address {
            color: var(--text-secondary);
            margin-bottom: 18px;
            font-size: 15px;
        }

        .property-features {
            display: flex;
            justify-content: space-between;
            margin-bottom: 18px;
        }

        .property-features span {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .property-features i {
            margin-right: 6px;
            color: var(--secondary);
        }

        .property-actions {
            display: flex;
            justify-content: space-between;
            border-top: 1px solid var(--border);
            padding-top: 18px;
        }

        .btn-save-property, .btn-view {
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            font-size: 14px;
            border: none;
            font-weight: 500;
        }

        .btn-save-property {
            background-color: var(--primary);
            color: var(--bg-secondary);
        }

        .btn-save-property:hover {
            background-color: var(--primary-dark, #4338CA);
            transform: translateY(-2px);
        }

        .btn-view {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-view:hover {
            background-color: rgba(var(--primary-rgb, 79, 70, 229), 0.05);
            transform: translateY(-2px);
        }

        /* Auth Modal Styles */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .auth-modal.show {
            display: flex;
        }

        .auth-container {
            background: var(--bg-secondary);
            border-radius: 24px;
            box-shadow: var(--shadow);
            overflow: hidden;
            width: 100%;
            max-width: 960px;
            min-height: 640px;
            display: flex;
            position: relative;
            margin: 24px;
            animation: fadeIn 0.5s ease-out;
        }

        .auth-sidebar {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--bg-secondary);
            padding: 48px 36px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .auth-sidebar h1 {
            font-size: 3em;
            margin-bottom: 24px;
            font-weight: 700;
        }

        .auth-sidebar p {
            font-size: 1.2em;
            opacity: 0.95;
            line-height: 1.7;
        }

        .auth-main {
            flex: 1;
            padding: 48px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 36px;
        }

        .auth-header h2 {
            color: var(--text-primary);
            font-size: 2.2em;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .auth-header p {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 36px;
            border-bottom: 1px solid var(--border);
        }

        .tab-button {
            flex: 1;
            padding: 18px;
            background: none;
            border: none;
            font-size: 1.1em;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            font-weight: 500;
        }

        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 15px;
        }

        .form-group input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1em;
            transition: var(--transition);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb, 79, 70, 229), 0.1);
        }

        .form-row {
            display: flex;
            gap: 18px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--bg-secondary);
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 12px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 6px rgba(var(--primary-rgb, 79, 70, 229), 0.2);
        }

        .success-message, .error-message {
            padding: 14px 18px;
            border-radius: 12px;
            margin-bottom: 24px;
            text-align: center;
            display: none;
            font-size: 15px;
        }

        .success-message {
            background: rgba(var(--success-rgb, 34, 197, 94), 0.1);
            color: var(--success);
            border: 1px solid rgba(var(--success-rgb, 34, 197, 94), 0.2);
        }

        .error-message {
            background: rgba(var(--error-rgb, 239, 68, 68), 0.1);
            color: var(--error);
            border: 1px solid rgba(var(--error-rgb, 239, 68, 68), 0.2);
        }

        .close-modal {
            position: absolute;
            top: 24px;
            right: 24px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--text-primary);
            transform: rotate(90deg);
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--bg-secondary);
            padding: 60px 0 24px;
            margin-top: 60px;
            position: relative;
            overflow: hidden;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 36px;
            margin-bottom: 36px;
        }

        .footer-column h3 {
            font-size: 20px;
            margin-bottom: 24px;
            font-weight: 600;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 12px;
        }

        .footer-column a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column a:hover {
            color: var(--bg-secondary);
        }

        .copyright {
            text-align: center;
            padding-top: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Reviews Section */
        .reviews-section {
            padding: 60px 0;
            background-color: var(--bg-primary);
            animation: fadeIn 1s ease-out;
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .reviews-header h2 {
            font-size: 2.5em;
            color: var(--text-primary);
            font-weight: 700;
        }

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
        }

        .review-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            opacity: 0;
            transform: translateY(20px);
        }

        .review-card.fade-in {
            animation: fadeIn 0.5s forwards;
        }

        .review-card:hover {
            transform: translateY(-8px);
        }

        .review-content {
            margin-bottom: 18px;
        }

        .review-author {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 16px;
        }

        .review-text {
            color: var(--text-secondary);
            font-size: 15px;
            margin: 12px 0;
            line-height: 1.7;
        }

        .review-rating {
            color: var(--accent);
            font-size: 18px;
        }

        /* Spinner */
        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
        }

        .loading-spinner i {
            font-size: 28px;
            margin-bottom: 12px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .auth-container {
                flex-direction: column;
                max-width: 100%;
                margin: 0;
                border-radius: 0;
            }

            .properties-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }
        }

        /* Animation for Messages */
        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
    <script src="profile-avatar.js"></script>
</head>
<body>
<!-- Main Content -->
<div id="home-page">
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-top">
                <a href="#" class="logo">
                    <i class="fas fa-home"></i>
                    PropertyHub
                </a>

                <ul class="nav-menu">
                    <li><a href="#" class="active">Home</a></li>
                    <li><a href="buy.html" onclick="checkAuth('buy')">Buy</a></li>
                    <li><a href="Rent.html" onclick="checkAuth('rent')">Rent</a></li>
                    <li><a href="apartment.html" onclick="checkAuth('sell')">Sell</a></li>
                    <li><a href="reviews.html">Reviews</a></li>
                    <li><a href="dashboard.html" onclick="checkAuth('dashboard')">Dashboard</a></li>
                </ul>

                <!-- User Account Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="user-trigger" onclick="toggleUserMenu()">
                        <div class="user-avatar" id="user-avatar">U</div>
                        <span class="user-name" id="user-name">User</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </div>

                    <div class="user-dropdown-menu" id="user-menu">
                        <div class="dropdown-header">
                            <div class="user-avatar-large" id="user-avatar-large">U</div>
                            <div class="user-details">
                                <span class="user-name-large" id="user-name-large">User</span>
                                <span class="user-email" id="user-email">user@email.com</span>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <ul class="dropdown-menu-items">
                            <li><a href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
                            <li><a href="reviews.html"><i class="fas fa-star"></i> Reviews</a></li>
                            <li><a href="dashboard.html" onclick="checkAuth('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                            <li><a href="apartment.html" onclick="checkAuth('sell')"><i class="fas fa-home"></i> Sell</a></li>
                        </ul>
                        <div class="dropdown-footer">
                            <button class="btn-logout-dropdown" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Login/Signup buttons -->
                <div class="auth-buttons" id="auth-buttons">
                    <button class="btn btn-login" onclick="showAuth('login')">Login</button>
                    <button class="btn btn-signup" onclick="showAuth('register')">Sign Up</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <h1>Find Your Dream Home</h1>
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Address, School, City, Zip or Neighborhood">
                <button class="search-btn">Search</button>
            </div>
        </div>
    </section>

    <!-- Properties Section -->
    <section class="properties-section">
        <div class="container">
            <div class="properties-header">
                <h2 class="section-title">Featured Properties</h2>
                <a href="buy.html" class="view-all">View all properties</a>
            </div>

            <div class="properties-grid">
                <!-- Property 1 -->
                <div class="property-card"
                     data-price="$449,900"
                     data-address="1245 Ocean Drive, Tampa, FL"
                     data-bedrooms="3"
                     data-bathrooms="2"
                     data-sqft="1,850"
                     data-type="Modern House"
                     data-year="2018"
                     data-lot="0.35 acres"
                     data-parking="2 Car Garage"
                     data-rent="$2,800"
                     data-deposit="$1,500"
                     data-hoa="$200/month"
                     data-tax="$4,200/year"
                     data-image="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Modern House" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$449,900</div>
                        <div class="property-address">1245 Ocean Drive, Tampa, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 3 beds</span>
                            <span><i class="fas fa-bath"></i> 2 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,850 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 2 -->
                <div class="property-card"
                     data-price="$455,000"
                     data-address="678 Bayview St, Tampa, FL"
                     data-bedrooms="4"
                     data-bathrooms="3"
                     data-sqft="2,100"
                     data-type="Contemporary Home"
                     data-year="2019"
                     data-lot="0.28 acres"
                     data-parking="2 Car Garage"
                     data-rent="$3,100"
                     data-deposit="$1,800"
                     data-hoa="$175/month"
                     data-tax="$4,800/year"
                     data-image="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2075&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2075&q=80" alt="Contemporary Home" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$455,000</div>
                        <div class="property-address">678 Bayview St, Tampa, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 4 beds</span>
                            <span><i class="fas fa-bath"></i> 3 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 2,100 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 3 -->
                <div class="property-card"
                     data-price="$439,999"
                     data-address="3410 Park Blvd, Tampa, FL"
                     data-bedrooms="3"
                     data-bathrooms="2.5"
                     data-sqft="1,950"
                     data-type="Elegant Villa"
                     data-year="2017"
                     data-lot="0.42 acres"
                     data-parking="2 Car Garage + Carport"
                     data-rent="$2,900"
                     data-deposit="$1,600"
                     data-hoa="$125/month"
                     data-tax="$3,900/year"
                     data-image="https://images.unsplash.com/photo-1613977257363-707ba9348227?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1613977257363-707ba9348227?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Elegant Villa" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$439,999</div>
                        <div class="property-address">3410 Park Blvd, Tampa, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 3 beds</span>
                            <span><i class="fas fa-bath"></i> 2.5 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,950 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 4 -->
                <div class="property-card"
                     data-price="$525,000"
                     data-address="789 Downtown Ave, Miami, FL"
                     data-bedrooms="2"
                     data-bathrooms="2"
                     data-sqft="1,200"
                     data-type="Luxury Apartment"
                     data-year="2021"
                     data-lot="Condo Unit"
                     data-parking="1 Covered Space"
                     data-rent="$3,500"
                     data-deposit="$2,000"
                     data-hoa="$350/month"
                     data-tax="$5,200/year"
                     data-image="https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Luxury Apartment" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$525,000</div>
                        <div class="property-address">789 Downtown Ave, Miami, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 2 beds</span>
                            <span><i class="fas fa-bath"></i> 2 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,200 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 5 -->
                <div class="property-card"
                     data-price="$389,500"
                     data-address="456 Sunset Blvd, Orlando, FL"
                     data-bedrooms="2"
                     data-bathrooms="1.5"
                     data-sqft="1,100"
                     data-type="Modern Condo"
                     data-year="2020"
                     data-lot="Condo Unit"
                     data-parking="1 Assigned Space"
                     data-rent="$2,400"
                     data-deposit="$1,200"
                     data-hoa="$280/month"
                     data-tax="$3,500/year"
                     data-image="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Modern Condo" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$389,500</div>
                        <div class="property-address">456 Sunset Blvd, Orlando, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 2 beds</span>
                            <span><i class="fas fa-bath"></i> 1.5 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,100 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 6 -->
                <div class="property-card"
                     data-price="$725,900"
                     data-address="123 Skyline Dr, Jacksonville, FL"
                     data-bedrooms="4"
                     data-bathrooms="3.5"
                     data-sqft="2,800"
                     data-type="Penthouse Suite"
                     data-year="2022"
                     data-lot="Top Floor Unit"
                     data-parking="2 Reserved Spaces"
                     data-rent="$4,500"
                     data-deposit="$3,000"
                     data-hoa="$450/month"
                     data-tax="$7,200/year"
                     data-image="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2053&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2053&q=80" alt="Penthouse Suite" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$725,900</div>
                        <div class="property-address">123 Skyline Dr, Jacksonville, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 4 beds</span>
                            <span><i class="fas fa-bath"></i> 3.5 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 2,800 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 7 -->
                <div class="property-card"
                     data-price="$245,000"
                     data-address="321 College St, Gainesville, FL"
                     data-bedrooms="1"
                     data-bathrooms="1"
                     data-sqft="650"
                     data-type="Cozy Studio"
                     data-year="2016"
                     data-lot="Studio Unit"
                     data-parking="Street Parking"
                     data-rent="$1,400"
                     data-deposit="$700"
                     data-hoa="$95/month"
                     data-tax="$1,800/year"
                     data-image="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Cozy Studio" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$245,000</div>
                        <div class="property-address">321 College St, Gainesville, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 1 bed</span>
                            <span><i class="fas fa-bath"></i> 1 bath</span>
                            <span><i class="fas fa-ruler-combined"></i> 650 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 8 -->
                <div class="property-card"
                     data-price="$895,000"
                     data-address="567 Beach Walk, Key West, FL"
                     data-bedrooms="5"
                     data-bathrooms="4"
                     data-sqft="3,200"
                     data-type="Beachfront Villa"
                     data-year="2019"
                     data-lot="0.75 acres"
                     data-parking="3 Car Garage"
                     data-rent="$5,800"
                     data-deposit="$4,000"
                     data-hoa="$300/month"
                     data-tax="$8,500/year"
                     data-image="https://images.unsplash.com/photo-1499793983690-e29da59ef1c2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1499793983690-e29da59ef1c2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Beachfront Villa" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$895,000</div>
                        <div class="property-address">567 Beach Walk, Key West, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 5 beds</span>
                            <span><i class="fas fa-bath"></i> 4 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 3,200 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 9 -->
                <div class="property-card"
                     data-price="$315,750"
                     data-address="890 Garden Grove, Tallahassee, FL"
                     data-bedrooms="2"
                     data-bathrooms="1"
                     data-sqft="950"
                     data-type="Garden Apartment"
                     data-year="2015"
                     data-lot="0.15 acres"
                     data-parking="1 Covered Space"
                     data-rent="$1,900"
                     data-deposit="$950"
                     data-hoa="$120/month"
                     data-tax="$2,800/year"
                     data-image="https://images.unsplash.com/photo-1448630360428-65456885c650?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2067&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1448630360428-65456885c650?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2067&q=80" alt="Garden Apartment" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$315,750</div>
                        <div class="property-address">890 Garden Grove, Tallahassee, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 2 beds</span>
                            <span><i class="fas fa-bath"></i> 1 bath</span>
                            <span><i class="fas fa-ruler-combined"></i> 950 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 10 -->
                <div class="property-card"
                     data-price="$599,900"
                     data-address="234 Industrial Way, St. Petersburg, FL"
                     data-bedrooms="3"
                     data-bathrooms="2.5"
                     data-sqft="1,750"
                     data-type="Executive Loft"
                     data-year="2021"
                     data-lot="Loft Unit"
                     data-parking="2 Garage Spaces"
                     data-rent="$3,800"
                     data-deposit="$2,200"
                     data-hoa="$320/month"
                     data-tax="$5,800/year"
                     data-image="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Executive Loft" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$599,900</div>
                        <div class="property-address">234 Industrial Way, St. Petersburg, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 3 beds</span>
                            <span><i class="fas fa-bath"></i> 2.5 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,750 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 11 -->
                <div class="property-card"
                     data-price="$475,000"
                     data-address="678 Maple Street, Sarasota, FL"
                     data-bedrooms="4"
                     data-bathrooms="3"
                     data-sqft="2,300"
                     data-type="Family Home"
                     data-year="2018"
                     data-lot="0.38 acres"
                     data-parking="2 Car Garage"
                     data-rent="$3,200"
                     data-deposit="$2,000"
                     data-hoa="$180/month"
                     data-tax="$4,600/year"
                     data-image="https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Family Home" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$475,000</div>
                        <div class="property-address">678 Maple Street, Sarasota, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 4 beds</span>
                            <span><i class="fas fa-bath"></i> 3 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 2,300 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 12 -->
                <div class="property-card"
                     data-price="$365,800"
                     data-address="901 Lake View Dr, Ocala, FL"
                     data-bedrooms="2"
                     data-bathrooms="2"
                     data-sqft="1,400"
                     data-type="Lakefront Cottage"
                     data-year="2016"
                     data-lot="0.22 acres"
                     data-parking="1 Car Garage"
                     data-rent="$2,200"
                     data-deposit="$1,300"
                     data-hoa="$160/month"
                     data-tax="$3,300/year"
                     data-image="https://images.unsplash.com/photo-1464146072230-91cabc968266?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1464146072230-91cabc968266?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Lakefront Cottage" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$365,800</div>
                        <div class="property-address">901 Lake View Dr, Ocala, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 2 beds</span>
                            <span><i class="fas fa-bath"></i> 2 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,400 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 13 -->
                <div class="property-card"
                     data-price="$485,500"
                     data-address="445 City Center Ln, Fort Lauderdale, FL"
                     data-bedrooms="3"
                     data-bathrooms="2.5"
                     data-sqft="1,680"
                     data-type="Urban Townhouse"
                     data-year="2020"
                     data-lot="0.18 acres"
                     data-parking="1 Car Garage"
                     data-rent="$3,000"
                     data-deposit="$1,800"
                     data-hoa="$250/month"
                     data-tax="$4,500/year"
                     data-image="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2061&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2061&q=80" alt="Urban Townhouse" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$485,500</div>
                        <div class="property-address">445 City Center Ln, Fort Lauderdale, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 3 beds</span>
                            <span><i class="fas fa-bath"></i> 2.5 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,680 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 14 -->
                <div class="property-card"
                     data-price="$425,900"
                     data-address="777 Paradise Blvd, Naples, FL"
                     data-bedrooms="2"
                     data-bathrooms="2"
                     data-sqft="1,325"
                     data-type="Resort Style Condo"
                     data-year="2021"
                     data-lot="Resort Unit"
                     data-parking="1 Covered Space"
                     data-rent="$2,700"
                     data-deposit="$1,500"
                     data-hoa="$380/month"
                     data-tax="$3,800/year"
                     data-image="https://images.unsplash.com/photo-1566195992011-5f6b21e539aa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2094&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1566195992011-5f6b21e539aa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2094&q=80" alt="Resort Style Condo" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$425,900</div>
                        <div class="property-address">777 Paradise Blvd, Naples, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 2 beds</span>
                            <span><i class="fas fa-bath"></i> 2 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,325 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>

                <!-- Property 15 -->
                <div class="property-card"
                     data-price="$395,000"
                     data-address="333 Heritage Ave, St. Augustine, FL"
                     data-bedrooms="2"
                     data-bathrooms="1.5"
                     data-sqft="1,150"
                     data-type="Historic Apartment"
                     data-year="1995"
                     data-lot="Historic Unit"
                     data-parking="Street Parking"
                     data-rent="$2,300"
                     data-deposit="$1,200"
                     data-hoa="$140/month"
                     data-tax="$3,200/year"
                     data-image="https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                    <div class="property-image">
                        <img src="https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" alt="Historic Apartment" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="property-content">
                        <div class="property-price">$395,000</div>
                        <div class="property-address">333 Heritage Ave, St. Augustine, FL</div>
                        <div class="property-features">
                            <span><i class="fas fa-bed"></i> 2 beds</span>
                            <span><i class="fas fa-bath"></i> 1.5 baths</span>
                            <span><i class="fas fa-ruler-combined"></i> 1,150 sqft</span>
                        </div>
                        <div class="property-actions">
                            <button class="btn-save-property" onclick="saveProperty(this)">Save Property</button>
                            <button class="btn-view" onclick="openApartmentModal(this)">View Details</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Customer Reviews Section -->
    <section class="reviews-section">
        <div class="container">
            <div class="reviews-header">
                <h2 class="section-title">What Our Customers Say</h2>
                <a href="reviews.html" class="view-all">View all reviews</a>
            </div>

            <div class="reviews-grid" id="reviews-container">
                <!-- Reviews will be dynamically loaded here -->
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading reviews...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>PropertyHub</h3>
                    <p>Your gateway to premium real estate. Discover, rent, and purchase your dream home with our comprehensive property management system.</p>
                </div>

                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#" onclick="checkAuth('buy')">Buy</a></li>
                        <li><a href="#" onclick="checkAuth('rent')">Rent</a></li>
                        <li><a href="#" onclick="checkAuth('sell')">Sell</a></li>
                        <li><a href="reviews.html">Reviews</a></li>
                        <li><a href="profile.html">Profile</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Real Estate Ave, Tampa, FL</li>
                        <li><i class="fas fa-phone"></i> (555) 123-4567</li>
                        <li><i class="fas fa-envelope"></i> info@propertyhub.com</li>
                    </ul>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2025 PropertyHub. All rights reserved.</p>
            </div>
        </div>
    </footer>
</div>

<!-- Apartment Details Modal -->
<div class="modal-overlay" id="apartmentModal">
    <div class="apartment-modal">
        <div class="modal-header">
            <div class="modal-image">
                <img id="modalImage" src="" alt="Property Image">
                <button class="modal-close" onclick="closeApartmentModal()">
                    <i class="fas fa-times"></i>
                </button>
                <div class="modal-price-badge" id="modalPrice">$0</div>
            </div>
        </div>

        <div class="modal-content">
            <h2 class="modal-title" id="modalTitle">Luxury Apartment</h2>
            <div class="modal-address" id="modalAddress">
                <i class="fas fa-map-marker-alt"></i>
                <span>Loading address...</span>
            </div>

            <div class="apartment-details-grid">
                <!-- Property Information -->
                <div class="detail-section">
                    <h3><i class="fas fa-home"></i>Property Details</h3>
                    <div class="detail-item">
                        <span class="detail-label">Property Type</span>
                        <span class="detail-value" id="propertyType">Apartment</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Year Built</span>
                        <span class="detail-value" id="yearBuilt">2020</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Lot Size</span>
                        <span class="detail-value" id="lotSize">0.25 acres</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Parking</span>
                        <span class="detail-value" id="parking">2 Car Garage</span>
                    </div>
                </div>

                <!-- Room Information -->
                <div class="detail-section">
                    <h3><i class="fas fa-bed"></i>Room Details</h3>
                    <div class="detail-item">
                        <span class="detail-label">Bedrooms</span>
                        <span class="detail-value" id="bedrooms">3</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Bathrooms</span>
                        <span class="detail-value" id="bathrooms">2</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Square Footage</span>
                        <span class="detail-value" id="sqft">1,850 sqft</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Floor Plan</span>
                        <span class="detail-value" id="floorPlan">Open Concept</span>
                    </div>
                </div>

                <!-- Financial Information -->
                <div class="detail-section">
                    <h3><i class="fas fa-dollar-sign"></i>Financial Details</h3>
                    <div class="detail-item">
                        <span class="detail-label">Monthly Rent</span>
                        <span class="detail-value" id="monthlyRent">$2,100</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Security Deposit</span>
                        <span class="detail-value" id="securityDeposit">$1,000</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">HOA Fees</span>
                        <span class="detail-value" id="hoaFees">$150/month</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Property Tax</span>
                        <span class="detail-value" id="propertyTax">$3,200/year</span>
                    </div>
                </div>

                <!-- Features & Amenities -->
                <div class="detail-section">
                    <h3><i class="fas fa-star"></i>Features & Amenities</h3>
                    <div class="features-list" id="featuresList">
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Air Conditioning</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Hardwood Floors</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Updated Kitchen</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Walk-in Closet</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Balcony/Patio</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>In-unit Laundry</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Pet Friendly</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check"></i>
                            <span>Swimming Pool</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn modal-btn-outline" onclick="savePropertyFromModal()">
                    <i class="fas fa-heart"></i>
                    Save Property
                </button>
                <button class="modal-btn modal-btn-primary" onclick="redirectToBuyPage()">
                    <i class="fas fa-home"></i>
                    View Buy Page
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Authentication Modal -->
<div class="auth-modal" id="auth-modal">
    <div class="auth-container">
        <button class="close-modal" onclick="closeAuth()">&times;</button>

        <div class="auth-sidebar">
            <h1>PropertyHub</h1>
            <p>Your gateway to premium real estate. Discover, rent, and purchase your dream home with our comprehensive property management system.</p>
        </div>

        <div class="auth-main">
            <div class="auth-header">
                <h2 id="auth-title">Welcome Back</h2>
                <p id="auth-subtitle">Please sign in to your account</p>
            </div>

            <div class="auth-tabs">
                <button class="tab-button active" onclick="switchTab('login')">Login</button>
                <button class="tab-button" onclick="switchTab('register')">Register</button>
            </div>

            <div class="success-message" id="success-message"></div>
            <div class="error-message" id="error-message"></div>

            <!-- Login Form -->
            <form class="auth-form active" id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="login-email">Email Address</label>
                    <input type="email" id="login-email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" name="password" required>
                </div>

                <button type="submit" class="submit-btn">Login</button>
            </form>

            <!-- Registration Form -->
            <form class="auth-form" id="register-form" onsubmit="handleRegister(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="register-name">Full Name</label>
                        <input type="text" id="register-name" name="name" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="register-email">Email Address</label>
                    <input type="email" id="register-email" name="email" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="register-confirm-password">Confirm Password</label>
                        <input type="password" id="register-confirm-password" name="confirmPassword" required>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Create Account</button>
            </form>
        </div>
    </div>
</div>

<script>
    // ==================== GLOBAL CONFIGURATION ====================
    const CONFIG = {
        API_BASE_URL: 'http://localhost:8080/api',
        REQUEST_TIMEOUT: 10000,
        ADMIN_CREDENTIALS: {
            email: "admin@propertyhub.com",
            password: "admin123"
        }
    };

    // ==================== STATE MANAGEMENT ====================
    let currentUser = null;
    let currentTab = 'login';

    // ==================== THEME MANAGEMENT ====================
    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        const toggleButton = document.getElementById('theme-toggle');
        if (toggleButton) {
            toggleButton.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        }
        document.body.classList.add('theme-transition');
        setTimeout(() => document.body.classList.remove('theme-transition'), 300);
    }

    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        setTheme(newTheme);
        trackUserActivity('theme', `Switched to ${newTheme} mode`);
    }

    function initializeTheme() {
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = savedTheme || (prefersDark ? 'dark' : 'light');
        setTheme(theme);
    }

    // ==================== AUTHENTICATION FUNCTIONS ====================
    function isAuthenticated() {
        const user = sessionStorage.getItem('currentUser');
        return user !== null;
    }

    function getCurrentUser() {
        return JSON.parse(sessionStorage.getItem('currentUser'));
    }

    function showAuth(tab = 'login') {
        currentTab = tab;
        switchTab(tab);
        document.getElementById('auth-modal').classList.add('show');
    }

    function closeAuth() {
        document.getElementById('auth-modal').classList.remove('show');
        clearMessages();
    }

    async function trackUserActivity(activityType, description, relatedData = null) {
        const user = getCurrentUser();
        if (!user) {
            console.log('No user found for activity tracking');
            return;
        }

        const activity = {
            userID: user.userID || user.id,
            activityType: activityType,
            description: description,
            relatedData: relatedData ? JSON.stringify(relatedData) : null
        };

        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/user/activity`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${sessionStorage.getItem('authToken')}`
                },
                body: JSON.stringify(activity)
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            console.log('Activity tracked successfully');
        } catch (error) {
            console.error('Failed to track activity:', error);
        }
    }

    async function saveProperty(button) {
        if (!isAuthenticated()) {
            alert('Please login to save properties.');
            showAuth('login');
            return;
        }

        const propertyCard = button.closest('.property-card');
        const propertyData = {
            price: propertyCard.querySelector('.property-price').textContent,
            address: propertyCard.querySelector('.property-address').textContent,
            features: propertyCard.querySelector('.property-features').textContent
        };

        const user = getCurrentUser();

        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/user/saved-properties`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${sessionStorage.getItem('authToken')}`
                },
                body: JSON.stringify({
                    userID: user.userID || user.id,
                    propertyData: propertyData
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();

            if (result.success) {
                await trackUserActivity('property', 'Saved property', propertyData);
                button.textContent = 'Saved!';
                button.style.background = 'var(--success)';
                button.disabled = true;
                button.classList.add('animate-pulse');

                setTimeout(() => {
                    button.textContent = 'Save Property';
                    button.style.background = 'var(--primary)';
                    button.disabled = false;
                    button.classList.remove('animate-pulse');
                }, 2000);

                alert('Property saved successfully!');
            } else {
                alert('Failed to save property: ' + result.message);
            }
        } catch (error) {
            console.error('Save property error:', error);
            alert('Failed to save property. Please try again.');
        }
    }

    function switchTab(tab) {
        currentTab = tab;
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-button')[tab === 'login' ? 0 : 1].classList.add('active');
        document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
        document.getElementById(tab + '-form').classList.add('active');

        if (tab === 'login') {
            document.getElementById('auth-title').textContent = 'Welcome Back';
            document.getElementById('auth-subtitle').textContent = 'Please sign in to your account';
        } else {
            document.getElementById('auth-title').textContent = 'Create Account';
            document.getElementById('auth-subtitle').textContent = 'Join our property community';
        }

        clearMessages();
    }

    // ==================== MESSAGE HANDLING ====================
    function showSuccess(message) {
        const successEl = document.getElementById('success-message');
        const errorEl = document.getElementById('error-message');
        successEl.textContent = message;
        successEl.style.display = 'block';
        errorEl.style.display = 'none';
        successEl.classList.add('animate-fadeIn');
    }

    function showError(message) {
        const errorEl = document.getElementById('error-message');
        const successEl = document.getElementById('success-message');
        errorEl.textContent = message;
        errorEl.style.display = 'block';
        successEl.style.display = 'none';
        errorEl.classList.add('animate-fadeIn');
    }

    function clearMessages() {
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('error-message').style.display = 'none';
    }

    // ==================== VALIDATION UTILITIES ====================
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    function isAdminUser(email, password) {
        return email === CONFIG.ADMIN_CREDENTIALS.email && password === CONFIG.ADMIN_CREDENTIALS.password;
    }

    // ==================== USER DROPDOWN MANAGEMENT ====================
    function toggleUserMenu() {
        const userMenu = document.getElementById('user-menu');
        const dropdown = document.querySelector('.user-dropdown');
        userMenu.classList.toggle('show');
        dropdown.classList.toggle('active');
    }

    function updateUserDropdown(user) {
        document.getElementById('auth-buttons').style.display = 'none';
        document.getElementById('userDropdown').style.display = 'inline-block';
        document.getElementById('user-name').textContent = user.name;
        document.getElementById('user-name-large').textContent = user.name;
        document.getElementById('user-email').textContent = user.email;

        // Update avatars with profile pictures
        updateUserAvatars(user);
        currentUser = user;
    }

    function updateUserAvatars(user) {
        const savedPicture = getUserProfilePicture(user.userID);
        const userAvatar = document.getElementById('user-avatar');
        const userAvatarLarge = document.getElementById('user-avatar-large');

        if (savedPicture) {
            // Replace with image elements
            userAvatar.innerHTML = `<img src="${savedPicture}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;" alt="Profile">`;
            userAvatarLarge.innerHTML = `<img src="${savedPicture}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;" alt="Profile">`;
        } else {
            // Show initials
            const initials = getUserInitials(user.name);
            userAvatar.textContent = initials;
            userAvatarLarge.textContent = initials;
        }
    }

    function resetUserDropdown() {
        document.getElementById('auth-buttons').style.display = 'flex';
        document.getElementById('userDropdown').style.display = 'none';
        currentUser = null;
    }

    // ==================== AUTHENTICATION HANDLERS ====================
    async function handleLogin(event) {
        event.preventDefault();
        clearMessages();

        const formData = new FormData(event.target);
        const email = formData.get('email').trim();
        const password = formData.get('password').trim();

        if (!email || !password) {
            showError('Please fill in all fields');
            return;
        }

        if (!isValidEmail(email)) {
            showError('Please enter a valid email address');
            return;
        }

        if (isAdminUser(email, password)) {
            handleAdminLogin(email);
            return;
        }

        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/auth/login`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            if (data.success) {
                showSuccess(`Welcome back, ${data.user.name}!`);
                sessionStorage.setItem('currentUser', JSON.stringify(data.user));
                sessionStorage.setItem('authToken', data.token || 'user-token');
                updateUserDropdown(data.user);

                setTimeout(() => {
                    closeAuth();
                    event.target.reset();
                }, 1200);
            } else {
                showError(data.message || 'Invalid email or password');
            }
        } catch (error) {
            console.error('Login error:', error);
            showError('Login failed. Please check your connection and try again.');
        }
    }

    function handleAdminLogin(email) {
        showSuccess('Welcome back, Admin!');
        const adminUser = {
            name: 'Admin',
            email: email,
            isAdmin: true,
            userID: 'admin'
        };
        sessionStorage.setItem('currentUser', JSON.stringify(adminUser));
        sessionStorage.setItem('authToken', 'admin-token');
        updateUserDropdown(adminUser);
        setTimeout(() => {
            closeAuth();
            window.location.href = 'adindex.html';
        }, 1500);
    }

    async function handleRegister(event) {
        event.preventDefault();
        clearMessages();

        const formData = new FormData(event.target);
        const name = formData.get('name').trim();
        const email = formData.get('email').trim();
        const password = formData.get('password').trim();
        const confirmPassword = formData.get('confirmPassword').trim();

        if (!name || !email || !password || !confirmPassword) {
            showError('Please fill in all required fields');
            return;
        }

        if (!isValidEmail(email)) {
            showError('Please enter a valid email address');
            return;
        }

        if (password.length < 6) {
            showError('Password must be at least 6 characters long');
            return;
        }

        if (password !== confirmPassword) {
            showError('Passwords do not match');
            return;
        }

        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/auth/register`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({ name, email, password })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            if (data.success) {
                showSuccess('Account created successfully! You can now sign in.');
                event.target.reset();
                setTimeout(() => {
                    switchTab('login');
                    document.getElementById('login-email').value = email;
                }, 2000);
            } else {
                showError(data.message || 'Registration failed. Please try again.');
            }
        } catch (error) {
            console.error('Registration error:', error);
            showError('Registration failed. Please check your connection and try again.');
        }
    }

    function logout() {
        if (confirm('Are you sure you want to logout?')) {
            if (currentUser) {
                trackUserActivity('authentication', 'User logged out');
            }
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('authToken');
            resetUserDropdown();
            alert('You have been logged out successfully.');
        }
    }

    // ==================== PAGE PROTECTION ====================
    function checkAuth(page) {
        if (!isAuthenticated()) {
            showAuth('login');
            return false;
        }
        trackUserActivity('navigation', `Accessed ${page} page`);

        // Redirect to the appropriate page
        switch(page) {
            case 'buy':
                window.location.href = 'buy.html';
                break;
            case 'rent':
                window.location.href = 'Rent.html';
                break;
            case 'sell':
                window.location.href = 'apartment.html';
                break;
            case 'dashboard':
                window.location.href = 'dashboard.html';
                break;
        }
        return true;
    }

    // ==================== PROPERTY INTERACTIONS ====================
    function showDashboard() {
        if (!isAuthenticated()) {
            showAuth('login');
            return;
        }
        alert('Dashboard would be shown here - This would navigate to the user dashboard page');
    }

    // ==================== UTILITY FUNCTIONS ====================
    function formatPhoneNumber(input) {
        let value = input.value.replace(/\D/g, '');
        if (value.length >= 10) {
            value = value.replace(/(\d{1})(\d{3})(\d{3})(\d{4})/, '+$1-$2-$3-$4');
        }
        input.value = value;
    }

    // ==================== API TESTING ====================
    async function testApiConnection() {
        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/auth/test`);
            if (response.ok) {
                console.log('API connection test: SUCCESS');
            } else {
                console.log('API connection test: FAILED');
            }
        } catch (error) {
            console.log('API connection test: FAILED -', error.message);
        }
    }

    // ==================== REVIEWS FUNCTIONALITY ====================
    async function loadReviews() {
        const reviewsContainer = document.getElementById('reviews-container');
        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/reviews/approved`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const reviews = await response.json();
            reviewsContainer.innerHTML = '';
            if (reviews && reviews.length > 0) {
                const latestReviews = reviews.sort((a, b) => new Date(b.createdAt || b.reviewDate) - new Date(a.createdAt || a.reviewDate)).slice(0, 3);
                latestReviews.forEach((review, index) => {
                    const card = createReviewCard(review);
                    reviewsContainer.appendChild(card);
                    setTimeout(() => card.classList.add('fade-in'), index * 200);
                });
            } else {
                reviewsContainer.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                        <i class="fas fa-comment-slash" style="font-size: 48px; color: var(--text-secondary); margin-bottom: 15px;"></i>
                        <p>No reviews yet. Be the first to leave a review!</p>
                    </div>
                `;
            }
        } catch (error) {
            console.error('Error loading reviews:', error);
            reviewsContainer.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 48px; color: var(--error); margin-bottom: 15px;"></i>
                    <p>Failed to load reviews. Please try again later.</p>
                </div>
            `;
        }
    }

    function createReviewCard(review) {
        const card = document.createElement('div');
        card.className = 'review-card';
        const stars = ''.repeat(review.rating) + ''.repeat(5 - review.rating);
        const reviewDate = review.createdAt || review.reviewDate;
        const formattedDate = reviewDate ? new Date(reviewDate).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        }) : 'Recently';
        card.innerHTML = `
            <div class="review-content">
                <div class="review-rating">${stars}</div>
                <h3 class="review-title">${review.title || 'Review'}</h3>
                <p class="review-text">${review.comment || review.content || ''}</p>
                <div class="review-author">
                    <span class="author-name">${review.userName || 'Anonymous User'}</span>
                    <span class="review-date">${formattedDate}</span>
                </div>
            </div>
        `;
        return card;
    }

    async function loadHomePageReviews() {
        const reviewsContainer = document.getElementById('reviews-container');
        if (!reviewsContainer) {
            console.error('Reviews container not found in DOM');
            return;
        }
        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/reviews/approved`);
            if (!response.ok) {
                throw new Error(`Failed to load reviews: ${response.status}`);
            }
            const reviews = await response.json();
            if (reviews && reviews.length > 0) {
                const displayReviews = [...reviews]
                    .sort((a, b) => new Date(b.createdAt || '').getTime() - new Date(a.createdAt || '').getTime())
                    .slice(0, 3);
                reviewsContainer.innerHTML = displayReviews.map(review => {
                    const userName = review.user && review.user.name ? review.user.name : 'Verified Customer';
                    const rating = review.rating || 5;
                    const stars = ''.repeat(rating) + ''.repeat(5 - rating);
                    const createdAt = review.createdAt ?
                        new Date(review.createdAt).toLocaleDateString('en-US', {
                            year: 'numeric', month: 'short', day: 'numeric'
                        }) : '';
                    return `
                        <div class="review-card">
                            <div class="review-content">
                                <div class="review-rating">${stars}</div>
                                <div class="review-title">${review.title || ''}</div>
                                <div class="review-text">${review.comment || ''}</div>
                                <div class="review-author">
                                    - ${userName} ${createdAt ? `<span class="review-date">(${createdAt})</span>` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                reviewsContainer.innerHTML = `
                    <div class="review-card">
                        <div class="review-content">
                            <div class="review-rating"></div>
                            <div class="review-text">PropertyHub made finding my dream home so easy! The interface is user-friendly and the team is very responsive.</div>
                            <div class="review-author">- John D.</div>
                        </div>
                    </div>
                    <div class="review-card">
                        <div class="review-content">
                            <div class="review-rating"></div>
                            <div class="review-text">I sold my apartment through PropertyHub in just two weeks! Great platform with excellent customer service.</div>
                            <div class="review-author">- Sarah M.</div>
                        </div>
                    </div>
                    <div class="review-card">
                        <div class="review-content">
                            <div class="review-rating"></div>
                            <div class="review-text">A reliable platform for property listings. Found exactly what I was looking for at the right price.</div>
                            <div class="review-author">- Michael T.</div>
                        </div>
                    </div>
                `;
            }
        } catch (error) {
            console.error('Failed to load reviews:', error);
            reviewsContainer.innerHTML = `
                <div class="review-card">
                    <div class="review-content">
                        <div class="review-rating"></div>
                        <div class="review-text">PropertyHub made finding my dream home so easy! The interface is user-friendly and the team is very responsive.</div>
                        <div class="review-author">- John D.</div>
                    </div>
                </div>
                <div class="review-card">
                    <div class="review-content">
                        <div class="review-rating"></div>
                        <div class="review-text">I sold my apartment through PropertyHub in just two weeks! Great platform with excellent customer service.</div>
                        <div class="review-author">- Sarah M.</div>
                    </div>
                </div>
                <div class="review-card">
                    <div class="review-content">
                        <div class="review-rating"></div>
                        <div class="review-text">A reliable platform for property listings. Found exactly what I was looking for at the right price.</div>
                        <div class="review-author">- Michael T.</div>
                    </div>
                </div>
            `;
        }
    }

    // ==================== APARTMENT MODAL FUNCTIONS ====================
    function openApartmentModal(button) {
        const propertyCard = button.closest('.property-card');
        const modal = document.getElementById('apartmentModal');

        // Extract data from property card attributes
        const data = {
            price: propertyCard.dataset.price,
            address: propertyCard.dataset.address,
            bedrooms: propertyCard.dataset.bedrooms,
            bathrooms: propertyCard.dataset.bathrooms,
            sqft: propertyCard.dataset.sqft,
            type: propertyCard.dataset.type,
            year: propertyCard.dataset.year,
            lot: propertyCard.dataset.lot,
            parking: propertyCard.dataset.parking,
            rent: propertyCard.dataset.rent,
            deposit: propertyCard.dataset.deposit,
            hoa: propertyCard.dataset.hoa,
            tax: propertyCard.dataset.tax,
            image: propertyCard.dataset.image
        };

        // Populate modal with apartment data
        document.getElementById('modalImage').src = data.image;
        document.getElementById('modalPrice').textContent = data.price;
        document.getElementById('modalTitle').textContent = data.type;
        document.querySelector('#modalAddress span').textContent = data.address;

        // Property Details
        document.getElementById('propertyType').textContent = data.type;
        document.getElementById('yearBuilt').textContent = data.year;
        document.getElementById('lotSize').textContent = data.lot;
        document.getElementById('parking').textContent = data.parking;

        // Room Details
        document.getElementById('bedrooms').textContent = data.bedrooms;
        document.getElementById('bathrooms').textContent = data.bathrooms;
        document.getElementById('sqft').textContent = data.sqft + ' sqft';
        document.getElementById('floorPlan').textContent = getFloorPlan(data.bedrooms);

        // Financial Details
        document.getElementById('monthlyRent').textContent = data.rent;
        document.getElementById('securityDeposit').textContent = data.deposit;
        document.getElementById('hoaFees').textContent = data.hoa;
        document.getElementById('propertyTax').textContent = data.tax;

        // Generate unique features based on property type
        generateFeatures(data.type, data.bedrooms, data.price);

        // Store current property data for payment actions
        window.currentProperty = data;

        // Show modal with animation
        modal.style.display = 'flex';
        setTimeout(() => modal.classList.add('show'), 10);

        // Prevent body scrolling
        document.body.style.overflow = 'hidden';
    }

    function closeApartmentModal() {
        const modal = document.getElementById('apartmentModal');
        modal.classList.remove('show');
        setTimeout(() => {
            modal.style.display = 'none';
            document.body.style.overflow = '';
        }, 300);
    }

    function getFloorPlan(bedrooms) {
        const floorPlans = {
            '1': 'Studio/Loft',
            '2': 'Open Concept',
            '3': 'Traditional Layout',
            '4': 'Split Level',
            '5': 'Executive Layout'
        };
        return floorPlans[bedrooms] || 'Custom Layout';
    }

    function generateFeatures(type, bedrooms, price) {
        const featuresList = document.getElementById('featuresList');
        const priceNum = parseFloat(price.replace(/[\$,]/g, ''));
        const bedroomNum = parseInt(bedrooms);

        // Base features
        let features = [
            { icon: 'fas fa-snowflake', text: 'Air Conditioning' },
            { icon: 'fas fa-wifi', text: 'High-Speed Internet' },
            { icon: 'fas fa-shield-alt', text: 'Security System' }
        ];

        // Add features based on price range
        if (priceNum > 500000) {
            features.push(
                { icon: 'fas fa-swimming-pool', text: 'Swimming Pool' },
                { icon: 'fas fa-dumbbell', text: 'Fitness Center' },
                { icon: 'fas fa-concierge-bell', text: 'Concierge Service' },
                { icon: 'fas fa-car', text: 'Valet Parking' }
            );
        } else if (priceNum > 400000) {
            features.push(
                { icon: 'fas fa-tree', text: 'Garden/Patio' },
                { icon: 'fas fa-fire', text: 'Fireplace' },
                { icon: 'fas fa-tshirt', text: 'In-unit Laundry' }
            );
        } else {
            features.push(
                { icon: 'fas fa-paw', text: 'Pet Friendly' },
                { icon: 'fas fa-tshirt', text: 'Laundry Facility' }
            );
        }

        // Add features based on bedrooms
        if (bedroomNum >= 3) {
            features.push(
                { icon: 'fas fa-door-open', text: 'Walk-in Closets' },
                { icon: 'fas fa-bath', text: 'Master Bathroom' }
            );
        }

        // Add features based on property type
        if (type.toLowerCase().includes('luxury') || type.toLowerCase().includes('penthouse')) {
            features.push(
                { icon: 'fas fa-building', text: 'City Views' },
                { icon: 'fas fa-glass-cheers', text: 'Wine Cellar' }
            );
        }

        if (type.toLowerCase().includes('villa') || type.toLowerCase().includes('house')) {
            features.push(
                { icon: 'fas fa-seedling', text: 'Private Yard' },
                { icon: 'fas fa-car', text: 'Garage' }
            );
        }

        // Limit to 8 features and render
        features = features.slice(0, 8);
        featuresList.innerHTML = features.map(feature => `
            <div class="feature-item">
                <i class="${feature.icon}"></i>
                <span>${feature.text}</span>
            </div>
        `).join('');
    }

    function savePropertyFromModal() {
        // Find the corresponding property card and trigger save
        const propertyCards = document.querySelectorAll('.property-card');
        const currentData = window.currentProperty;

        propertyCards.forEach(card => {
            if (card.dataset.address === currentData.address) {
                const saveBtn = card.querySelector('.btn-save-property');
                if (saveBtn) {
                    saveProperty(saveBtn);
                }
            }
        });

        // Show success message
        showSuccess('Property saved to your favorites!');
    }

    function redirectToBuyPage() {
        const user = JSON.parse(sessionStorage.getItem('currentUser') || 'null');
        if (!user) {
            alert('Please login to view the buy page');
            closeApartmentModal();
            document.getElementById('auth-modal').style.display = 'flex';
            return;
        }

        closeApartmentModal();
        // Redirect to buy page with property data
        sessionStorage.setItem('selectedProperty', JSON.stringify(window.currentProperty));
        window.location.href = 'buy.html';
    }

    // Close modal when clicking outside
    document.addEventListener('click', function(e) {
        const modal = document.getElementById('apartmentModal');
        if (e.target === modal) {
            closeApartmentModal();
        }
    });

    // Close modal with escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeApartmentModal();
        }
    });

    // ==================== INITIALIZATION ====================
    function initializeHomePage() {
        // Initialize theme
        initializeTheme();

        // Add theme toggle button
        const headerTop = document.querySelector('.header-top');
        const themeToggle = document.createElement('button');
        themeToggle.id = 'theme-toggle';
        themeToggle.className = 'theme-toggle';
        themeToggle.innerHTML = document.documentElement.getAttribute('data-theme') === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        themeToggle.addEventListener('click', toggleTheme);
        headerTop.appendChild(themeToggle);

        // Check if user is already logged in
        const savedUser = sessionStorage.getItem('currentUser');
        if (savedUser) {
            const user = JSON.parse(savedUser);
            document.getElementById('auth-buttons').style.display = 'none';
            const userDropdown = document.getElementById('userDropdown');
            userDropdown.style.display = 'inline-block';
            const initial = user.name.charAt(0).toUpperCase();
            document.getElementById('user-name').textContent = user.name;
            document.getElementById('user-name-large').textContent = user.name;
            document.getElementById('user-email').textContent = user.email;

            // Update avatars with profile pictures
            updateUserAvatars(user);
        }

        // Load reviews
        loadHomePageReviews();
    }

    document.addEventListener('DOMContentLoaded', function() {
        testApiConnection();
        initializeHomePage();
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown && !dropdown.contains(e.target)) {
                document.getElementById('user-menu').classList.remove('show');
                dropdown.classList.remove('active');
            }
        });
        document.getElementById('auth-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAuth();
            }
        });
    });
</script>
</body>
</html>
